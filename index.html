<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Birthday Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Press Start 2P', cursive;
      background-color: #ffe6f0;
      overflow: hidden;
    }

    #start-screen, #game-screen, #popup {
      position: absolute;
      width: 100%;
      height: 100%;
      text-align: center;
    }

    #start-screen {
      background-color: #ffcce6;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #start-screen h1 {
      font-size: 20px;
      margin-bottom: 20px;
    }

    #start-screen input {
      padding: 10px;
      font-size: 14px;
      margin-bottom: 10px;
      width: 300px;
      text-align: center;
    }

    #start-screen button {
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
    }

    #game-screen {
      display: none;
    }

    #world {
      position: absolute;
      width: 100000px;
      height: 100%;
    }

    #ground {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 50px;
      background-color: #ffb6c1;
    }

    #clouds, #cakes {
      position: absolute;
      top: 0;
      height: 100%;
    }

    .cloud {
      position: absolute;
      width: 100px;
      height: 60px;
      background: url('clouds.png') no-repeat center center / contain;
    }

    .cake {
      position: absolute;
      bottom: 50px;
      width: 60px;
      height: 60px;
      background: url('cake.png') no-repeat center center / contain;
    }

    #kitty {
      position: absolute;
      bottom: 50px;
      width: 100px;
      height: 100px;
      background: url('hello_kitty1.png') no-repeat center center / contain;
    }

    #popup {
      background-color: rgba(255, 182, 193, 0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;
      display: none;
    }

    #popup-message {
      font-size: 18px;
      color: hotpink;
      padding: 20px;

      background: linear-gradient(90deg, hotpink, white, hotpink);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 2s linear infinite;
    }

    @keyframes shimmer {
      0% {
        background-position: 200% center;
      }
      100% {
        background-position: -200% center;
      }
    }
  </style>
</head>
<body>
  <div id="start-screen">
    <h1>HAPPY BIRTHDAY PRINCESS ðŸŽ‚</h1>
    <input type="text" id="nameInput" placeholder="ENTER YOUR NAME ;)" />
    <br>
    <button id="startButton">Start Game</button>
  </div>

  <div id="game-screen">
    <div id="world">
      <div id="ground"></div>
      <div id="clouds"></div>
      <div id="cakes"></div>
    </div>
    <div id="kitty"></div>
  </div>

  <div id="popup">
    <div id="popup-message"></div>
  </div>

  <script>
    const startScreen = document.getElementById('start-screen');
    const gameScreen = document.getElementById('game-screen');
    const popup = document.getElementById('popup');
    const popupMessage = document.getElementById('popup-message');
    const nameInput = document.getElementById('nameInput');
    const startButton = document.getElementById('startButton');
    const kitty = document.getElementById('kitty');
    const world = document.getElementById('world');
    const cloudsContainer = document.getElementById('clouds');
    const cakesContainer = document.getElementById('cakes');

    const walkSound = new Audio('walk.mp3');
    const eatSound = new Audio('eat.mp3');
    const popupSound = new Audio('popup.mp3');

    let kittyX = 100;
    let kittyWorldX = 0;
    let moveLeft = false;
    let moveRight = false;
    let gameRunning = false;
    let totalCakes = 15;
    let cakesEaten = 0;
    let spawnedCakesCount = 0;
    let cakes = [];
    let cakeSpawnInterval;
    let lastCakeX = 0;

    function createClouds() {
      for (let i = 0; i < 10; i++) {
        const cloud = document.createElement('div');
        cloud.classList.add('cloud');
        cloud.style.left = (i * 400 + Math.random() * 200) + 'px';
        cloud.style.top = (Math.random() * 200 + 20) + 'px';
        cloudsContainer.appendChild(cloud);
      }
    }

    function placeCakes() {
      lastCakeX = kittyWorldX + 800;

      cakeSpawnInterval = setInterval(() => {
        if (spawnedCakesCount >= totalCakes) {
          clearInterval(cakeSpawnInterval);
          return;
        }

        const cake = document.createElement('div');
        cake.classList.add('cake');

        lastCakeX += 200 + Math.random() * 200;
        cake.style.left = lastCakeX + 'px';

        cakesContainer.appendChild(cake);
        cakes.push(cake);
        spawnedCakesCount++;
      }, 1250);
    }

    function checkCakeCollision() {
      cakes.forEach((cake, index) => {
        const cakeX = parseInt(cake.style.left);
        if (Math.abs(cakeX - kittyWorldX) < 60) {
          eatSound.play().catch(() => {});
          cakesContainer.removeChild(cake);
          cakes.splice(index, 1);
          cakesEaten++;
          if (cakesEaten >= totalCakes) showPopup();
        }
      });
    }

    function showPopup() {
      popup.style.display = 'flex';
      popupMessage.innerText = `HAPPY BIRTHDAY ${nameInput.value.toUpperCase()}! ðŸŽ‰ðŸŽ‚`;
      popupSound.play().catch(() => {});
    }

    function updateGame() {
      if (!gameRunning) return;

      if (moveLeft) kittyX -= 5;
      if (moveRight) kittyX += 5;

      kittyX = Math.max(0, Math.min(window.innerWidth - 100, kittyX));
      kitty.style.left = kittyX + 'px';

      if (moveLeft) kittyWorldX -= 5;
      if (moveRight) kittyWorldX += 5;

      world.style.left = -kittyWorldX + 'px';
      checkCakeCollision();
      requestAnimationFrame(updateGame);
    }

    startButton.onclick = () => {
      if (!nameInput.value.trim()) {
        alert('Please enter your name!');
        return;
      }

      startScreen.style.display = 'none';
      gameScreen.style.display = 'block';
      gameRunning = true;
      kitty.style.left = kittyX + 'px';

      createClouds();
      placeCakes();
      updateGame();
    };

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') {
        moveLeft = true;
        walkSound.loop = true;
        walkSound.play().catch(() => {});
      }
      if (e.key === 'ArrowRight') {
        moveRight = true;
        walkSound.loop = true;
        walkSound.play().catch(() => {});
      }
    });

    document.addEventListener('keyup', (e) => {
      if (e.key === 'ArrowLeft') moveLeft = false;
      if (e.key === 'ArrowRight') moveRight = false;
      if (!moveLeft && !moveRight) walkSound.pause();
    });
  </script>
</body>
</html>
