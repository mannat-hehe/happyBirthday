<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Birthday Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Fredoka&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Fredoka', sans-serif;
      background-color: #ffe6f0;
      overflow: hidden;
    }

    #start-screen, #popup {
      position: absolute;
      width: 100%;
      height: 100%;
      background: #fff;
      z-index: 10;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #start-screen h1 {
      font-family: 'Press Start 2P', cursive;
      font-size: 20px;
      color: black;
      margin-bottom: 20px;
      text-align: center;
    }

    #name-input {
      padding: 10px;
      font-size: 16px;
      text-transform: uppercase;
      margin-bottom: 20px;
    }

    #start-btn {
      padding: 10px 20px;
      font-size: 14px;
      background-color: #ff69b4;
      color: white;
      border: none;
      cursor: pointer;
    }

    #game-world {
      position: relative;
      width: 35000px;
      height: 100vh;
      background-color: #ffe6f0;
      overflow: hidden;
    }

    .kitty {
      position: absolute;
      bottom: 20px;
      width: 100px;
      transition: transform 0.1s;
    }

    .cake {
      position: absolute;
      bottom: 20px;
      width: 60px;
    }

    .cloud {
      position: absolute;
      width: 150px;
      opacity: 0.7;
      animation: floatClouds 60s linear infinite;
    }

    @keyframes floatClouds {
      from { transform: translateX(0); }
      to { transform: translateX(-36000px); }
    }

    #popup {
      background: rgba(255, 255, 255, 0.95);
      font-family: 'Press Start 2P', cursive;
      font-size: 18px;
      color: hotpink;
      text-align: center;
      animation: shimmer 1s infinite alternate;
    }

    @keyframes shimmer {
      from { text-shadow: 0 0 5px #ff69b4; }
      to { text-shadow: 0 0 20px #ff69b4; }
    }

    .hidden {
      display: none;
    }

    .confetti {
      position: absolute;
      font-size: 20px;
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0% { transform: translateY(0); }
      50% { transform: translateY(10px); }
      100% { transform: translateY(0); }
    }

    video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 15;
      opacity: 0;
      transition: opacity 1s;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="start-screen">
    <h1>HAPPY BIRTHDAY PRINCESS ðŸŽ‚</h1>
    <input id="name-input" placeholder="ENTER YOUR NAME ;)" />
    <button id="start-btn">START GAME</button>
  </div>

  <div id="popup" class="hidden"></div>
  <video id="bg-video" src="background.mp4"></video>
  <div id="game-world">
    <img id="kitty" class="kitty" src="hello_kitty1.png" />
  </div>

  <audio id="bite-sound" src="bite.mp3"></audio>
  <audio id="popup-sound" src="popup.mp3"></audio>
  <audio id="walk-sound" src="walk.mp3"></audio>

  <script>
    const startScreen = document.getElementById('start-screen');
    const startBtn = document.getElementById('start-btn');
    const nameInput = document.getElementById('name-input');
    const gameWorld = document.getElementById('game-world');
    const kitty = document.getElementById('kitty');
    const popup = document.getElementById('popup');
    const bgVideo = document.getElementById('bg-video');
    const biteSound = document.getElementById('bite-sound');
    const popupSound = document.getElementById('popup-sound');
    const walkSound = document.getElementById('walk-sound');

    let kittyX = 17500;
    let collected = 0;
    let playerName = '';

    const cakeSpacing = 300;
    const totalCakes = 20;
    const cakePositions = [];

    function spawnCakes() {
      let placedCakes = 0;
      let attempts = 0;
      while (placedCakes < totalCakes && attempts < 1000) {
        const x = Math.floor(Math.random() * 35000);
        if (cakePositions.every(pos => Math.abs(x - pos) >= cakeSpacing)) {
          cakePositions.push(x);
          const cake = document.createElement('img');
          cake.src = 'cake.png';
          cake.className = 'cake';
          cake.style.left = `${x}px`;
          gameWorld.appendChild(cake);
          placedCakes++;
        }
        attempts++;
      }
    }

    function spawnClouds() {
      for (let i = 0; i < 50; i++) {
        const cloud = document.createElement('img');
        cloud.src = 'cloud.png';
        cloud.className = 'cloud';
        cloud.style.left = `${Math.random() * 34000}px`;
        cloud.style.top = `${Math.random() * 150}px`;
        gameWorld.appendChild(cloud);
      }
    }

    function moveKitty(direction) {
      if (direction === 'left') {
        kittyX -= 20;
        kitty.style.transform = 'scaleX(-1)';
      } else {
        kittyX += 20;
        kitty.style.transform = 'scaleX(1)';
      }
      kittyX = Math.max(0, Math.min(kittyX, 34900));
      gameWorld.style.left = `-${kittyX - window.innerWidth / 2}px`;
      updateKittyImage();
      walkSound.pause();
      walkSound.currentTime = 0;
      walkSound.play();
      checkCakeCollision();
    }

    let blinkTimer = setInterval(() => {
      kitty.src = 'hello_kitty3.png';
      setTimeout(() => kitty.src = 'hello_kitty1.png', 200);
    }, 2000);

    let walkToggle = true;
    function updateKittyImage() {
      walkToggle = !walkToggle;
      kitty.src = walkToggle ? 'hello_kitty1.png' : 'hello_kitty2.png';
    }

    function checkCakeCollision() {
      document.querySelectorAll('.cake').forEach(cake => {
        const cakeX = parseInt(cake.style.left);
        if (Math.abs(cakeX - kittyX) < 60 && !cake.dataset.collected) {
          cake.dataset.collected = true;
          cake.remove();
          biteSound.play();
          collected++;
          if (collected === totalCakes) showPopup();
        }
      });
    }

    function showPopup() {
      popup.classList.remove('hidden');
      popup.innerHTML = `HAPPY BIRTHDAY ${playerName.toUpperCase()}! ðŸŽ‰ðŸ’•`;
      popup.querySelectorAll('.confetti').forEach(c => c.remove());
      for (let i = 0; i < 80; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.innerText = ['ðŸ’–','ðŸŽ‰','ðŸŒ€','â­','ðŸ’•','âœ¨'][Math.floor(Math.random() * 6)];
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.top = `${Math.random() * 100}vh`;
        confetti.style.fontSize = `${Math.random() * 30 + 10}px`;
        popup.appendChild(confetti);
      }
      popupSound.play();
    }

    popupSound.onended = () => {
      showVideo();
    };

    function showVideo() {
      bgVideo.style.opacity = 1;
      bgVideo.play();
    }

    bgVideo.onended = () => {
      bgVideo.style.opacity = 0;
      setTimeout(() => {
        if (popup.classList.contains('hidden')) {
          popup.classList.remove('hidden');
        }
      }, 1000);
    };

    function startGame() {
      playerName = nameInput.value.trim() || 'FRIEND';
      startScreen.classList.add('hidden');
      gameWorld.style.left = `-${kittyX - window.innerWidth / 2}px`;
      spawnCakes();
      spawnClouds();
    }

    startBtn.addEventListener('click', startGame);
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
        moveKitty(e.key === 'ArrowLeft' ? 'left' : 'right');
      }
    });
  </script>
</body>
</html>
