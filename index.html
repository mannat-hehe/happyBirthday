<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Birthday Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Fredoka&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Fredoka', sans-serif;
      background-color: #ffe6f0;
      overflow: hidden;
    }

    #startScreen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #fff;
      z-index: 999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Press Start 2P', cursive;
    }

    #startScreen h1 {
      font-size: 18px;
      margin-bottom: 20px;
      color: black;
    }

    #startScreen input {
      font-size: 10px;
      padding: 10px;
      margin-bottom: 10px;
      text-align: center;
      text-transform: uppercase;
    }

    #startScreen button {
      font-size: 10px;
      padding: 10px 20px;
      cursor: pointer;
    }

    #gameWorld {
      position: relative;
      height: 100vh;
      width: 35000px;
      overflow: hidden;
      background-color: #ffe6f0;
    }

    #helloKitty {
      position: absolute;
      bottom: 50px;
      width: 100px;
      transition: transform 0.1s;
    }

    .cake {
      position: absolute;
      bottom: 60px;
      width: 50px;
    }

    .cloud {
      position: absolute;
      top: 50px;
      width: 100px;
      opacity: 0.5;
    }

    #popup {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(255,255,255,0.9);
      z-index: 999;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-family: 'Press Start 2P', cursive;
      color: hotpink;
      animation: shimmer 1s infinite;
    }

    .hidden { display: none; }

    @keyframes shimmer {
      0% { text-shadow: 0 0 2px #ff69b4, 0 0 10px #ff1493; }
      50% { text-shadow: 0 0 4px #ff69b4, 0 0 20px #ff1493; }
      100% { text-shadow: 0 0 2px #ff69b4, 0 0 10px #ff1493; }
    }

    .confetti {
      position: fixed;
      z-index: 1000;
      font-size: 20px;
      animation: fall 3s ease-in infinite;
    }

    @keyframes fall {
      0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
  </style>
</head>
<body>

<div id="startScreen">
  <h1>HAPPY BIRTHDAY PRINCESS üéÇ</h1>
  <input type="text" id="nameInput" placeholder="ENTER YOUR NAME ;)">
  <button onclick="startGame()">START GAME</button>
</div>

<div id="gameWorld">
  <img id="helloKitty" src="hello_kitty1.png">
</div>

<div id="popup" class="hidden">HAPPY BIRTHDAY üéâüíï</div>

<audio id="eatSound" src="eat.mp3"></audio>
<audio id="walkSound" src="walk.mp3" loop></audio>
<audio id="popupSound" src="popup.mp3"></audio>

<script>
  const gameWorld = document.getElementById('gameWorld');
  const kitty = document.getElementById('helloKitty');
  const eatSound = document.getElementById('eatSound');
  const walkSound = document.getElementById('walkSound');
  const popupSound = document.getElementById('popupSound');
  const popup = document.getElementById('popup');
  const nameInput = document.getElementById('nameInput');
  const startScreen = document.getElementById('startScreen');

  let playerName = '';
  let kittyX = 17500;
  let collectedCakes = 0;
  let totalCakes = 20;
  let blinkTimer, moveTimer;

  function startGame() {
    playerName = nameInput.value.trim() || 'FRIEND';
    startScreen.classList.add('hidden');
    gameWorld.style.left = `-${kittyX - window.innerWidth / 2}px`;
    spawnCakes();
    spawnClouds();
    blinkKitty();
  }

  function blinkKitty() {
    blinkTimer = setInterval(() => {
      kitty.src = 'hello_kitty3.png';
      setTimeout(() => kitty.src = 'hello_kitty1.png', 200);
    }, 2000);
  }

  function spawnCakes() {
    let lastX = 500;
    for (let i = 0; i < totalCakes; i++) {
      const cake = document.createElement('img');
      cake.src = 'cake.png';
      cake.className = 'cake';
      let x = lastX + 300 + Math.random() * 700;
      lastX = x;
      cake.style.left = `${x}px`;
      gameWorld.appendChild(cake);
    }
  }

  function spawnClouds() {
    for (let i = 0; i < 50; i++) {
      const cloud = document.createElement('img');
      cloud.src = 'clouds.png';
      cloud.className = 'cloud';
      cloud.style.left = `${Math.random() * 35000}px`;
      cloud.style.top = `${Math.random() * 100}px`;
      cloud.style.opacity = 0.5 + Math.random() * 0.5;
      gameWorld.appendChild(cloud);
    }
  }

  function moveKitty(dir) {
    clearInterval(moveTimer);
    kitty.src = dir === 'left' ? 'hello_kitty2.png' : 'hello_kitty2.png';
    kitty.style.transform = dir === 'left' ? 'scaleX(-1)' : 'scaleX(1)';
    walkSound.play();

    moveTimer = setInterval(() => {
      kittyX += dir === 'left' ? -10 : 10;
      if (kittyX < 0) kittyX = 0;
      if (kittyX > 34900) kittyX = 34900;
      kitty.style.left = `${kittyX}px`;
      gameWorld.style.left = `-${kittyX - window.innerWidth / 2}px`;
      checkCakeCollision();
    }, 30);
  }

  function stopKitty() {
    clearInterval(moveTimer);
    kitty.src = 'hello_kitty1.png';
    walkSound.pause();
  }

  function checkCakeCollision() {
    const cakes = document.querySelectorAll('.cake');
    cakes.forEach(cake => {
      const cakeX = parseInt(cake.style.left);
      if (Math.abs(cakeX - kittyX) < 60) {
        eatSound.play();
        cake.remove();
        collectedCakes++;
        if (collectedCakes >= totalCakes) showPopup();
      }
    });
  }

  function showPopup() {
    popup.innerText = `HAPPY BIRTHDAY ${playerName}! üéâüíï`;
    popup.classList.remove('hidden');
    popupSound.play();
    createConfetti();
    setTimeout(showVideo, 3000);
  }

  function createConfetti() {
    const emojis = ['üíñ','üéâ','üåÄ','‚≠ê','üíï','‚ú®'];
    for (let i = 0; i < 80; i++) {
      const conf = document.createElement('div');
      conf.className = 'confetti';
      conf.innerText = emojis[Math.floor(Math.random() * emojis.length)];
      conf.style.left = Math.random() * 100 + 'vw';
      conf.style.fontSize = (12 + Math.random() * 24) + 'px';
      conf.style.animationDuration = (2 + Math.random() * 2) + 's';
      document.body.appendChild(conf);
      setTimeout(() => conf.remove(), 4000);
    }
  }

  function showVideo() {
    const video = document.createElement('video');
    video.src = 'background.mp4';
    video.style.position = 'fixed';
    video.style.top = 0;
    video.style.left = 0;
    video.style.width = '100vw';
    video.style.height = '100vh';
    video.style.zIndex = 998;
    video.style.objectFit = 'cover';
    video.autoplay = true;
    video.controls = false;
    video.playsInline = true;
    video.muted = false; // üîä Sound enabled
    document.body.appendChild(video);

    popup.classList.add('hidden');

    video.addEventListener('ended', () => {
      video.remove();
      popup.classList.remove('hidden');
    });
  }

  document.addEventListener('keydown', e => {
    if (e.key === 'ArrowLeft') moveKitty('left');
    if (e.key === 'ArrowRight') moveKitty('right');
  });

  document.addEventListener('keyup', stopKitty);
</script>

</body>
</html>
